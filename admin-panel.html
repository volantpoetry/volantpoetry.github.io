<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noindex, nofollow">
<title>Admin Panel - Rence Blunt Poetry</title>
<link rel="stylesheet" href="admin.css">
<style>
/* Admin layout */
.admin-layout { display: flex; margin-top: 60px; }
aside.sidebar {
  width: 250px;
  background: #f5f5f5;
  padding: 20px;
  transition: transform 0.3s ease;
}
main.content { flex: 1; padding: 20px; }

/* Sidebar toggle button */
#sidebar-toggle {
  display: none;
  position: fixed;
  top: 70px;
  left: 10px;
  z-index: 1600;
  font-size: 2rem;
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 6px;
  padding: 5px 10px;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

/* Overlay */
.overlay {
  display: none;
  position: fixed;
  top: 60px;
  left: 0;
  width: 100%;
  height: calc(100% - 60px);
  background: rgba(0,0,0,0.3);
  z-index: 1400;
}
.overlay.show { display: block; }

/* Hide sidebar on small screens */
@media (max-width: 768px) {
  #sidebar-toggle { display: block; }

  aside.sidebar {
    position: fixed;
    top: 60px;
    left: 0;
    height: calc(100% - 60px);
    transform: translateX(-100%);
    z-index: 1500;
  }

  aside.sidebar.show { transform: translateX(0); }

  .admin-layout { flex-direction: column; }
  main.content { margin-left: 0; padding: 15px; }
}
</style>
  <link rel="icon" type="png" href="images/logo.png" />
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
  <div class="logo">Rence Blunt Poetry</div>
  <div class="menu-toggle" id="menu-toggle">☰</div>
  <div class="nav-links" id="nav-links">
    <a href="admin.html">1st Admin Panel</a>
      <a href="3 admin-panel.html">2rd Admin Panel</a>
    <a href="index.html">Home</a>
  </div>
</nav>

<!-- Sidebar toggle -->
<button id="sidebar-toggle">☰</button>

<!-- Overlay -->
<div id="overlay" class="overlay"></div>

<div class="admin-layout">
  <!-- Sidebar -->
  <aside class="sidebar">
    <nav>
      <a href="#" data-section="manageAdmins">Manage Admins</a>
      <a href="#" data-section="manageUsers">Manage Users</a>
      <a href="#" data-section="settings">Settings</a>
    </nav>
  </aside>

  <main class="content">
    <h1>2nd Admin Panel</h1>

    <!-- Messages Section -->
    <section id="manageMessages" class="form-section">
      <h2>Messages</h2>
      <div id="messagesList" class="messages-list">
        <p>Loading messages...</p>
      </div>
    </section>

    <!-- Manage Content Section -->
    <section id="manageContent" class="form-section hidden">
      <h2>Content</h2>
      <p>Use the previous manage.html tables for poems, quotes, and recent poems here.</p>
      <div id="contentTables"></div>
    </section>

    <!-- Manage Admins Section -->
    <section id="manageAdmins" class="form-section hidden">
      <h2>Admins</h2>
      <form id="addAdminForm">
        <input type="email" placeholder="Admin Email" required />
        <button type="submit">Add Admin</button>
      </form>
      <table id="adminsTable">
        <thead>
          <tr>
            <th>Email</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- Manage Users Section -->
    <section id="manageUsers" class="form-section hidden">
      <h2>Users</h2>
      <table id="usersTable">
        <thead>
          <tr>
            <th>Email</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- Settings Section -->
    <section id="settings" class="form-section hidden">
      <h2>Settings</h2>
      <p>Additional settings can go here.</p>
    </section>
  </main>
</div>

<script>
// Navbar toggle (mobile)
document.addEventListener("DOMContentLoaded", () => {
  const toggle = document.getElementById("menu-toggle");
  const navLinks = document.getElementById("nav-links");
  if (toggle && navLinks) {
    toggle.addEventListener("click", () => navLinks.classList.toggle("show"));
  }
  // Close menu on link click
  navLinks.querySelectorAll("a").forEach(link => {
    link.addEventListener("click", () => navLinks.classList.remove("show"));
  });
});

// Sidebar toggle with overlay
const sidebarToggle = document.getElementById("sidebar-toggle");
const sidebar = document.querySelector(".sidebar");
const overlay = document.getElementById("overlay");

sidebarToggle.addEventListener("click", () => {
  sidebar.classList.toggle("show");
  overlay.classList.toggle("show");
});
overlay.addEventListener("click", () => {
  sidebar.classList.remove("show");
  overlay.classList.remove("show");
});
</script>


<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyC4DHI8aBVY4JjTvJ-r-TGIDPsewtEWxzU",
  authDomain: "silent-depth.firebaseapp.com",
  projectId: "silent-depth",
  storageBucket: "silent-depth.firebasestorage.app",
  messagingSenderId: "78008755450",
  appId: "1:78008755450:web:3fd0f0f298a08820935543",
  measurementId: "G-WSWDCB7KD8"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// Admin authentication check
onAuthStateChanged(auth, async (user) => {
  if (user) {
    const adminDoc = await getDoc(doc(db, "admins", user.uid));
    if (adminDoc.exists()) {
      // Admin logged in → show dashboard
      document.getElementById("admin-dashboard").style.display = "block";
    } else {
      // Not an admin → redirect
      window.location.href = "admin-login.html";
    }
  } else {
    // Not logged in → redirect
    window.location.href = "admin-login.html";
  }
});
</script>
<script type="module" src="admin-panel.js"></script>
</body>
</html>
